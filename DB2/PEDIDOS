-- *******************
-- * TABELA PEDIDOS *
-- *******************
CREATE TABLE PEDIDOS (
NUMERO_PEDIDO INTEGER GENERATED ALWAYS AS IDENTITY
(START WITH 1 INCREMENT BY 1) PRIMARY KEY,
CPF CHAR(11) NOT NULL,
NUMERO_CARTAO DECIMAL(16,0) NOT NULL,
TIPO_CARTAO CHAR(1) NOT NULL,
DATA DATE NOT NULL,
VALOR_TOTAL DECIMAL(7,2) DEFAULT 0
);

CREATE UNIQUE INDEX IX_PEDIDOS_NUMERO
ON PEDIDOS (NUMERO_PEDIDO);

ALTER TABLE PEDIDOS
ADD FOREIGN KEY (CPF)
REFERENCES CLIENTES (CPF)
ON DELETE RESTRICT;

ALTER TABLE PEDIDOS
ADD FOREIGN KEY (NUMERO_CARTAO)
REFERENCES CARTOES (NUMERO_CARTAO)
ON DELETE RESTRICT;
